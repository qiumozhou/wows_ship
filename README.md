# 战舰世界自动游戏脚本

战舰世界（World of Warships）自动化游戏脚本，实现自动选择战船、开始游戏、寻敌、瞄准、射击等完整游戏流程。

## 功能特性

- ✅ **自动选择战船** - 从战船选择栏自动选择战船
- ✅ **自动开始游戏** - 自动点击"加入战斗"按钮
- ✅ **自动寻敌** - 识别地图上的红色多边形敌人标记
- ✅ **自动导航** - 自动移动到敌人位置
- ✅ **自动瞄准** - 自动瞄准最近的敌人
- ✅ **自动射击** - 自动开火攻击敌人
- ✅ **状态检测** - 自动检测游戏状态（港口、战斗中、被击毁等）
- ✅ **自动退出** - 战舰被击毁后自动退出战斗
- ✅ **循环游戏** - 自动开始下一局游戏

## 项目结构

```
.
├── wows_auto_bot.py          # 主自动游戏脚本
├── wows_auto_navigate.py     # 自动导航脚本（独立功能）
├── requirements.txt          # Python依赖包
├── .gitignore               # Git忽略文件
├── README.md                # 项目说明文档
├── img/                     # 游戏界面截图（用于分析）
└── output/                  # 输出目录（可视化结果）
```

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 自动游戏脚本

运行完整的自动游戏流程：

```bash
python wows_auto_bot.py
```

脚本会自动执行以下流程：
1. 检测当前游戏状态
2. 如果在港口，选择战船并开始游戏
3. 在战斗中自动寻敌、瞄准、射击
4. 检测到被击毁后自动退出
5. 返回港口后自动开始下一局

### 自动导航脚本

运行独立的自动导航功能：

```bash
python wows_auto_navigate.py
```

功能：
- 识别最近的敌人
- 打开地图
- 点击敌人附近区域进行自动导航
- 生成位置关系可视化图

## 技术实现

- **图像识别**: 使用 OpenCV 进行颜色识别和轮廓检测
- **鼠标控制**: 使用 pyautogui 进行鼠标和键盘操作
- **人类模拟**: 所有操作都使用缓慢移动和随机延迟，模拟人类操作
- **状态机**: 使用枚举类型管理游戏状态

## 配置说明

### 屏幕分辨率

默认支持 1920×1080 分辨率，如需修改请在代码中调整：

```python
SCREEN_WIDTH = 1920
SCREEN_HEIGHT = 1080
```

### 颜色识别参数

如需调整颜色识别范围，修改以下参数：

```python
# 红色敌人（HSV范围）
RED_LOWER_1 = np.array([0, 100, 100])
RED_UPPER_1 = np.array([10, 255, 255])
RED_LOWER_2 = np.array([170, 100, 100])
RED_UPPER_2 = np.array([180, 255, 255])

# 白色玩家（HSV范围）
WHITE_LOWER = np.array([0, 0, 200])
WHITE_UPPER = np.array([180, 30, 255])
```

### 操作延迟参数

调整鼠标移动和操作延迟：

```python
MIN_MOVE_DURATION = 0.3  # 最小移动时间（秒）
MAX_MOVE_DURATION = 0.8  # 最大移动时间（秒）
MIN_RANDOM_DELAY = 0.1   # 最小随机延迟（秒）
MAX_RANDOM_DELAY = 0.3   # 最大随机延迟（秒）
```

## 注意事项

⚠️ **重要提示**：

1. 本脚本仅供学习和研究使用
2. 使用自动化脚本可能违反游戏服务条款
3. 建议在测试环境或单机模式下使用
4. 使用前请确保了解相关风险
5. 坐标和颜色参数可能需要根据实际游戏环境调整

## 日志记录

所有操作都会记录到日志文件：

- `wows_auto_bot.log` - 自动游戏脚本日志
- `wows_auto_navigate.log` - 自动导航脚本日志

## 作者

@author seven

@since 2024-12-19

## 许可证

本项目仅供学习和研究使用。

